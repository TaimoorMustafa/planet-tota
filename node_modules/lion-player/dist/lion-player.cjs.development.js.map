{"version":3,"file":"lion-player.cjs.development.js","sources":["../src/utils/hotkeys-handler.ts","../src/constants/options.ts","../src/hooks/usePlayer.tsx","../src/components/UncontrolledLionPlayer.tsx","../src/components/LionPlayer.tsx"],"sourcesContent":["// ANCHOR VideoJS\nimport VIDEOJS, { VideoJsPlayer } from 'video.js'\n\nexport const HOTKEYS_HANDLER = (\n  event: VIDEOJS.KeyboardEvent,\n  player: VideoJsPlayer | null,\n) => {\n  if (player) {\n    const currentTime = player.currentTime();\n    const currentVolume = player.volume();\n    const isMuted = player.muted();\n    const isFullscreen = player.isFullscreen();\n    const isPaused = player.paused();\n\n    // Go 5 seconds backward\n    if (event.code === 'ArrowLeft') {\n      player.currentTime(currentTime - 5);\n    }\n\n    // Go 5 seconds forward\n    if (event.code === 'ArrowRight') {\n      player.currentTime(currentTime + 5);\n    }\n\n    // Increase volume by 5%\n    if (event.code === 'ArrowUp') {\n      if (currentVolume <= 0.95) {\n        player.volume(currentVolume + 0.05);\n      } else {\n        player.volume(1);\n      }\n    }\n\n    // Decrease volume by 5%\n    if (event.code === 'ArrowDown') {\n      if (currentVolume >= 0.05) {\n        player.volume(currentVolume - 0.05);\n      } else {\n        player.volume(0);\n      }\n    }\n\n    // Mute/Unmute toggle\n    if (event.code === 'KeyM') {\n      if (isMuted) {\n        player.muted(false);\n      } else {\n        player.muted(true);\n      }\n    }\n\n    // Fullscreen/Exit toggle\n    if (event.code === 'KeyF') {\n      if (isFullscreen) {\n        player.exitFullscreen()\n      } else {\n        player.requestFullscreen();\n      }\n    }\n\n    // Play/Pause toggle\n    if (event.code === 'Space') {\n      if (isPaused) {\n        player.play();\n      } else {\n        player.pause();\n      }\n    }\n  }\n}\n","// ANCHOR VideoJS\nimport { VideoJsPlayerOptions } from 'video.js'\n\nexport const DEFAULT_OPTIONS: VideoJsPlayerOptions = {\n  controls: true,\n  controlBar: {\n    children: [\n      'playToggle',\n      'volumePanel',\n      'currentTimeDisplay',\n      'timeDivider',\n      'durationDisplay',\n      'progressControl',\n      'liveDisplay',\n      'customControlSpacer',\n      'chaptersButton',\n      'descriptionsButton',\n      'subsCapsButton',\n      'audioTrackButton',\n      'playbackRateMenuButton',\n      'fullscreenToggle',\n    ],\n    progressControl: {\n      seekBar: true\n    }\n  },\n  autoplay: false,\n  fluid: true,\n  inactivityTimeout: 2500,\n  preload: 'auto',\n  width: 100,\n  playbackRates: [0.25, 0.5, 0.75, 1, 1.25, 1.5, 2],\n  html5: {\n    vhs: {\n      enableLowInitialPlaylist: true,\n      smoothQualityChange: true,\n      overrideNative: true,\n    },\n  },\n  plugins: {\n    qualityLevel: {},\n    hlsQualitySelector: {\n      displayCurrentQuality: true,\n    },\n  },\n};\n","// ANCHOR React\nimport { useEffect, useRef, useState } from 'react';\n\n// ANCHOR VideoJS\nimport VIDEOJS, { VideoJsPlayer, VideoJsPlayerOptions } from 'video.js'\nimport videoJsContribQualityLevels from 'videojs-contrib-quality-levels'\nimport videoJsHlsQualitySelector from 'videojs-hls-quality-selector'\n\n// ANCHOR Utils\nimport { HOTKEYS_HANDLER } from '../utils/hotkeys-handler';\n\n// ANCHOR Constants\nimport { DEFAULT_OPTIONS } from '../constants/options';\n\nexport default function usePlayer(\n  options: VideoJsPlayerOptions,\n) {\n  const ref = useRef<HTMLVideoElement | null>(null);\n  const [player, setPlayer] = useState<VideoJsPlayer | null>(null)\n\n  useEffect(() => {\n    VIDEOJS.registerPlugin('qualityLevel', videoJsContribQualityLevels)\n    VIDEOJS.registerPlugin('hlsQualitySelector', videoJsHlsQualitySelector)\n  }, [])\n\n  useEffect(() => {\n    const vjsPlayer = ref.current\n      ? VIDEOJS(ref.current, {\n        ...DEFAULT_OPTIONS,\n        ...options,\n        userActions: {\n          hotkeys: (event) => {\n            HOTKEYS_HANDLER(event, vjsPlayer)\n          }\n        },\n      }, () => {\n        if (vjsPlayer) {\n          setPlayer(vjsPlayer);\n\n          if (options.sources) {\n            vjsPlayer.src(options.sources);\n          } else if (options.src) {\n            vjsPlayer.src(options.src)\n          }\n\n          vjsPlayer.currentTime(0);\n          vjsPlayer.load();\n        }\n      })\n      : null;\n\n    return () => {\n      if (vjsPlayer) {\n        vjsPlayer.reset();\n      }\n    };\n  }, [options]);\n\n  return {\n    ref,\n    player,\n  };\n};\n","// ANCHOR React\nimport React from \"react\";\n\nexport interface IUncontrolledPlayerProps {\n  playerRef: React.LegacyRef<HTMLVideoElement>\n}\n\nexport default function UncontrolledLionPlayer(\n  { playerRef }: IUncontrolledPlayerProps\n) {\n  return (\n    <div data-vjs-player>\n      <video\n        ref={playerRef}\n        className=\"video-js vjs-theme-lion\"\n      >\n        <p className=\"vjs-no-js\">\n          To view this video please enable JavaScript, and consider upgrading to a\n          web browser that <a href=\"https://videojs.com/html5-video-support/\" target=\"_blank\">supports HTML5 video\n          </a>\n        </p>\n      </video>\n    </div>\n  )\n};\n","// ANCHOR React\nimport React from 'react';\n\n// ANCHOR VideoJS\nimport { VideoJsPlayerOptions, } from 'video.js';\n\n// ANCHOR Hooks\nimport usePlayer from '../hooks/usePlayer';\n\n// ANCHOR Components\nimport UncontrolledLionPlayer from './UncontrolledLionPlayer';\n\nexport default function LionPlayer(\n  props?: VideoJsPlayerOptions,\n) {\n  const { ref } = usePlayer({ ...props });\n\n  return <UncontrolledLionPlayer playerRef={ref} />;\n};\n\n"],"names":["HOTKEYS_HANDLER","event","player","currentTime","currentVolume","volume","isMuted","muted","isFullscreen","isPaused","paused","code","exitFullscreen","requestFullscreen","play","pause","DEFAULT_OPTIONS","controls","controlBar","children","progressControl","seekBar","autoplay","fluid","inactivityTimeout","preload","width","playbackRates","html5","vhs","enableLowInitialPlaylist","smoothQualityChange","overrideNative","plugins","qualityLevel","hlsQualitySelector","displayCurrentQuality","usePlayer","options","ref","useRef","useState","setPlayer","useEffect","VIDEOJS","registerPlugin","videoJsContribQualityLevels","videoJsHlsQualitySelector","vjsPlayer","current","userActions","hotkeys","sources","src","load","reset","UncontrolledLionPlayer","playerRef","React","className","href","target","LionPlayer","props"],"mappings":"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"}